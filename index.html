<!DOCTYPE html>
<html lang="ur">
<head>
  <meta charset="UTF-8">
  <title>درود ابراہیمی کاؤنٹر</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <button onclick="generatePDF()">📄 PDF بنائیں</button>

  <script>
    const { jsPDF } = window.jspdf;

    // 🔹 Soft Random Colors فنکشن
    function randomSoftColor() {
      return [
        Math.floor(150 + Math.random() * 100), // R
        Math.floor(150 + Math.random() * 100), // G
        Math.floor(150 + Math.random() * 100)  // B
      ];
    }

    function generatePDF() {
      const doc = new jsPDF();
      let pageNumber = 1;

      // 🔹 Header/Footer فنکشن
      function addHeaderFooter() {
        doc.setFontSize(10);
        doc.setTextColor(100);

        doc.text("درود ابراہیمی - خودکار کاؤنٹر", 105, 10, { align: "center" });
        doc.text("صفحہ " + pageNumber, 200, 290, { align: "right" });
      }

      // 🔹 Title Page
      const [r1,g1,b1] = randomSoftColor();
      doc.setTextColor(r1,g1,b1);
      doc.setFontSize(22);
      doc.text("درود ابراہیمی", 105, 100, { align: "center" });

      const [r2,g2,b2] = randomSoftColor();
      doc.setTextColor(r2,g2,b2);
      doc.setFontSize(16);
      doc.text("اللّٰھم صل علیٰ محمد و علیٰ آل محمد، کما صلیت علیٰ ابراھیم...", 105, 120, { align: "center" });

      const [r3,g3,b3] = randomSoftColor();
      doc.setTextColor(r3,g3,b3);
      doc.setFontSize(14);
      doc.text("شروع اللہ کے نام سے جو بڑا مہربان نہایت رحم والا ہے", 105, 140, { align: "center" });

      addHeaderFooter();

      // 🔹 نئی پیج پر لسٹ شروع
      doc.addPage();
      pageNumber++;
      addHeaderFooter();

      const darood = "اللّٰھم صل علیٰ محمد و علیٰ آل محمد، کما صلیت علیٰ ابراھیم و علیٰ آل ابراھیم، انک حمید مجید۔ اللّٰھم بارک علیٰ محمد و علیٰ آل محمد، کما بارکت علیٰ ابراھیم و علیٰ آل ابراھیم، انک حمید مجید۔";
      const daroodList = Array(100).fill(darood); // 100 بار مثال کے طور پر

      // 🔹 لسٹ پرنٹ کرنا
      let y = 30;
      daroodList.forEach((d, i) => {
        if (y > 270) {
          doc.addPage();
          pageNumber++;
          addHeaderFooter();
          y = 30;
        }

        // Random Soft رنگ
        const [r,g,b] = randomSoftColor();
        doc.setTextColor(r,g,b);

        const wrappedText = doc.splitTextToSize((i+1) + ". " + d, 180);
        doc.text(wrappedText, 10, y);
        y += (wrappedText.length * 8);
      });

      // 🔹 آخر میں PDF محفوظ کریں
      doc.save("Drood_Ibrahimi.pdf");
    }
  </script>
</body>
</html>
