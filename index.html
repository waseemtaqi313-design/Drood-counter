<!DOCTYPE html>
<html lang="ur">
<head>
  <meta charset="UTF-8">
  <title>درود ابراہیمی PDF</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <button onclick="generatePDF()">📄 PDF بنائیں</button>
  <p id="status" style="font-weight:bold; color:green;"></p>

  <script>
    const { jsPDF } = window.jspdf;

    // 🔹 Random Soft Color Function
    function randomSoftColor() {
      return [
        Math.floor(100 + Math.random() * 120),
        Math.floor(100 + Math.random() * 120),
        Math.floor(100 + Math.random() * 120)
      ];
    }

    function generatePDF() {
      const doc = new jsPDF("p", "mm", "a4");
      let pageNumber = 1;
      let y = 30;

      const statusEl = document.getElementById("status");

      // ✅ پورا درود
      const darood = "اللّٰهُمَّ صَلِّ عَلٰی مُحَمَّدٍ وَعَلٰی اٰلِ مُحَمَّدٍ، كَمَا صَلَّيْتَ عَلٰی إِبْرَاهِيمَ وَعَلٰی اٰلِ إِبْرَاهِيمَ، إِنَّكَ حَمِيْدٌ مَّجِيْدٌ۔ اللّٰهُمَّ بَارِكْ عَلٰی مُحَمَّدٍ وَعَلٰی اٰلِ مُحَمَّدٍ، كَمَا بَارَكْتَ عَلٰی إِبْرَاهِيمَ وَعَلٰی اٰلِ إِبْرَاهِيمَ، إِنَّكَ حَمِيْدٌ مَّجِيْدٌ۔";

      const repeatCount = 200; // ← ٹیسٹ کیلئے 200، بعد میں بڑھا سکتے ہیں

      // 🔹 Header/Footer function
      function addHeaderFooter() {
        doc.setFontSize(10);
        doc.setTextColor(80);
        doc.text("درود ابراہیمی کاؤنٹر", 105, 10, { align: "center" });
        doc.text("صفحہ " + pageNumber, 200, 290, { align: "right" });
      }

      addHeaderFooter();

      // 🔹 Loop to write Darood
      for (let i = 0; i < repeatCount; i++) {
        if (y > 270) {   // نیا صفحہ
          doc.addPage();
          pageNumber++;
          addHeaderFooter();
          y = 30;
        }

        const [r,g,b] = randomSoftColor();
        doc.setTextColor(r,g,b);
        doc.setFontSize(12);

        const wrappedText = doc.splitTextToSize((i+1) + ". " + darood, 180);
        doc.text(wrappedText, 15, y);

        y += (wrappedText.length * 7); // اگلی لائن کیلئے اسپیس
      }

      statusEl.innerText = `✅ ${repeatCount} درود لکھ کر PDF تیار ہوگیا`;
      doc.save("Drood_Ibrahimi.pdf");
    }
  </script>
</body>
</html>
