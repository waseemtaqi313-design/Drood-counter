// PDF ÚˆØ§Ø¤Ù†Ù„ÙˆÚˆ
pdfBtn.addEventListener("click", function() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  let pageNumber = 1;

  // ðŸ”¹ Helper ÙÙ†Ú©Ø´Ù†: Random Ø±Ù†Ú¯ Ø¨Ù†Ø§Ù†Ø§
  function randomColor() {
    return [
      Math.floor(Math.random() * 256),
      Math.floor(Math.random() * 256),
      Math.floor(Math.random() * 256)
    ];
  }

  // ðŸ”¹ Title Page with Border
  doc.setDrawColor(150, 75, 0); 
  doc.setLineWidth(1.5);
  doc.rect(10, 10, 190, 277); 

  let [r1,g1,b1] = randomColor();
  doc.setTextColor(r1,g1,b1);
  doc.setFont("Helvetica", "bold");
  doc.setFontSize(22);
  doc.text("ðŸŒ¹ Ø¯Ø±ÙˆØ¯Ù Ø§Ø¨Ø±Ø§ÛÛŒÙ…ÛŒ ðŸŒ¹", 70, 50);

  doc.setFont("Helvetica", "normal");
  doc.setFontSize(14);
  let [r2,g2,b2] = randomColor();
  doc.setTextColor(r2,g2,b2);
  doc.text("Ø´Ø±ÙˆØ¹ Ø§Ù„Ù„Û Ú©Û’ Ù†Ø§Ù… Ø³Û’ Ø¬Ùˆ Ø¨Ú‘Ø§ Ù…ÛØ±Ø¨Ø§Ù† Ù†ÛØ§ÛŒØª Ø±Ø­Ù… ÙˆØ§Ù„Ø§ ÛÛ’", 25, 70);

  doc.setDrawColor(0, 100, 0); 
  doc.setLineWidth(0.8);
  doc.line(40, 80, 170, 80);

  // ðŸ”¹ Ù¾ÛÙ„Ø§ Ø¯Ø±ÙˆØ¯
  const firstDarood = "Ø§Ù„Ù„Ù‘Ù°Ù‡ÙÙ…Ù‘ÙŽ ØµÙŽÙ„Ù‘Ù Ø¹ÙŽÙ„Ù°Ù‰ Ù…ÙØ­ÙŽÙ…Ù‘ÙŽØ¯Ù ÙˆÙŽØ¹ÙŽÙ„Ù°Ù‰ Ø¢Ù„Ù Ù…ÙØ­ÙŽÙ…Ù‘ÙŽØ¯ÙØŒ ÙƒÙŽÙ…ÙŽØ§ ØµÙŽÙ„Ù‘ÙŽÙŠÙ’ØªÙŽ Ø¹ÙŽÙ„Ù°Ù‰ Ø¥ÙØ¨Ù’Ø±ÙŽØ§Ù‡ÙÙŠÙ…ÙŽ ÙˆÙŽØ¹ÙŽÙ„Ù°Ù‰ Ø¢Ù„Ù Ø¥ÙØ¨Ù’Ø±ÙŽØ§Ù‡ÙÙŠÙ…ÙŽØŒ Ø¥ÙÙ†Ù‘ÙŽÙƒÙŽ Ø­ÙŽÙ…ÙÙŠØ¯ÙŒ Ù…ÙŽØ¬ÙÙŠØ¯ÙŒ";
  const wrappedDarood = doc.splitTextToSize(firstDarood, 170);

  let [r3,g3,b3] = randomColor();
  doc.setTextColor(r3,g3,b3);
  doc.setFontSize(16);
  doc.text("Ù…Ø«Ø§Ù„:", 20, 100);
  doc.setFontSize(14);
  doc.text(wrappedDarood, 20, 110);

  // ðŸ”¹ Ø§Ø±Ø¯Ùˆ ØªØ±Ø¬Ù…Û
  const urduTranslation = "Ø§Û’ Ø§Ù„Ù„Û! Ø±Ø­Ù…Øª Ù†Ø§Ø²Ù„ ÙØ±Ù…Ø§ Ù…Ø­Ù…Ø¯ ï·º Ø§ÙˆØ± Ø¢Ù„Ù Ù…Ø­Ù…Ø¯ ï·º Ù¾Ø±ØŒ Ø¬ÛŒØ³Û’ Ú©Û ØªÙˆ Ù†Û’ Ø±Ø­Ù…Øª Ù†Ø§Ø²Ù„ ÙØ±Ù…Ø§Ø¦ÛŒ Ø§Ø¨Ø±Ø§ÛÛŒÙ… Ø¹Ù„ÛŒÛ Ø§Ù„Ø³Ù„Ø§Ù… Ø§ÙˆØ± Ø¢Ù„Ù Ø§Ø¨Ø±Ø§ÛÛŒÙ… Ø¹Ù„ÛŒÛ Ø§Ù„Ø³Ù„Ø§Ù… Ù¾Ø±Û” Ø¨Û’ Ø´Ú© ØªÙˆ Ù„Ø§Ø¦Ù‚ Ø­Ù…Ø¯ Ùˆ Ø¨Ø²Ø±Ú¯ÛŒ ÙˆØ§Ù„Ø§ ÛÛ’Û”";
  const wrappedTranslation = doc.splitTextToSize(urduTranslation, 170);

  let [r4,g4,b4] = randomColor();
  doc.setTextColor(r4,g4,b4);
  doc.setFontSize(14);
  doc.text("ØªØ±Ø¬Ù…Û:", 20, 135);
  doc.setFontSize(12);
  doc.text(wrappedTranslation, 20, 145);

  // ðŸ”¹ Ø¯Ø¹Ø§
  const dua = "ÛŒØ§ Ø§Ù„Ù„Û! Ø§Ø³ Ø¯Ø±ÙˆØ¯ Ú©Ùˆ ÛÙ…Ø§Ø±Û’ Ù„ÛŒÛ’ Ø¨Ø§Ø¹Ø«Ù Ø±Ø­Ù…ØªØŒ Ø¨Ø±Ú©Øª Ø§ÙˆØ± Ù†Ø¬Ø§Øª Ø¨Ù†Ø§Û” Ø¢Ù…ÛŒÙ†Û”";
  const wrappedDua = doc.splitTextToSize(dua, 170);

  let [r5,g5,b5] = randomColor();
  doc.setTextColor(r5,g5,b5);
  doc.setFontSize(14);
  doc.text("Ø¯Ø¹Ø§:", 20, 175);
  doc.setFontSize(12);
  doc.text(wrappedDua, 20, 185);

  // ðŸ”¹ Ø§Ú¯Ù„Ø§ ØµÙØ­Û
  doc.addPage();
  pageNumber++;

  // Header/Footer ÙÙ†Ú©Ø´Ù†
  function addHeaderFooter() {
    doc.setFontSize(14);
    doc.setTextColor(0,0,0); // ÛÛŒÚˆØ±/ÙÙ¹Ø± Ø¨Ù„ÛŒÚ©
    doc.text("ðŸŒ¹ Ø¯Ø±ÙˆØ¯Ù Ø§Ø¨Ø±Ø§ÛÛŒÙ…ÛŒ Ú©Ø§Ø¤Ù†Ù¹Ø± ðŸŒ¹", 70, 10);
    doc.setFontSize(10);
    doc.text("ØµÙØ­Û " + pageNumber, 180, 290);
    doc.setFontSize(12);
  }

  addHeaderFooter();

  // ðŸ”¹ Ø¨Ø§Ù‚ÛŒ Ù„Ø³Ù¹ (Random Ø±Ù†Ú¯ Ú©Û’ Ø³Ø§ØªÚ¾)
  let y = 30;
  daroodList.forEach((d, i) => {
    if(y > 270) { 
      doc.addPage(); 
      pageNumber++;
      addHeaderFooter();
      y = 30; 
    }

    const [r,g,b] = randomColor();
    doc.setTextColor(r,g,b);

    const wrappedText = doc.splitTextToSize((i+1) + ". " + d, 180);
    doc.text(wrappedText, 10, y);
    y += (wrappedText.length * 8);
  });

  // Ø¢Ø®Ø± Ù…ÛŒÚº ÙˆØ§Ù¾Ø³ Ø¨Ù„ÛŒÚ©
  doc.setTextColor(0,0,0);

  doc.save("Darood_List.pdf");
});
